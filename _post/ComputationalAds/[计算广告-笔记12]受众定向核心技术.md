---
title: 计算广告-笔记12：受众定向核心技术
tags:
  - 受众定向
comments: true
categories:
  - 计算广告
mathjax: false
abbrlink: d44b943f
date: 2020-10-03 12:11:11
top: 4
---

## 定义

### 对广告(a)、用户(u)、上下文(c)三个维度提取有意义的标签的过程

### 受众定向是在线广告，特别是展示广告最核心的驱动力之一

## 技术分类

### 用户标签t(u)

- 特点：以用户历史日志数据为依据
- 分类

	- 人口属性定向：规模化获取人口属性比较困难，需要数据驱动的模型，以用户行为为基础自动预测其人口属性
	- 行为定向

		- 建模问题

		  - 建模目标

		  	- 找出某个类型的广告上eCPM较高的人群
		  	- 若点击价值近似一致，则等价于：找出在该类型广告上点击率较高的人群

		  - 建模对象：某个用户在某类广告上的点击量
		  - 建模方法：
    广义线性模型

		    - 1.根据目标值的特性选择合适的指数族分布描述

		      - 由于点击行为是离散到达的随机变量，对其数量最自然的概率描述是泊松分布。
		
      - ![指数族分布函数](https://cdn.jsdelivr.net/gh/notlate-cn/imgs/blogs/image-20210203214655867.png)

        h：某个用户在某个定向类别广告上的点击量(单位有效展示的点击数)
        t：某个受众标签
		        λt：控制点击行为到达频繁性参数
        含义解读：根据某用户在不同类别广告的点击量和控制参数(用户行为加权和)计算他在某类广告（不同受众标签）上的点击率
		
		    - 2.用线性模型将多个自变量和指数族分布的参数联系起来

      - 把用户行为与频繁性参数λt联系起来

      - ![线性模型](https://cdn.jsdelivr.net/gh/notlate-cn/imgs/blogs/image-20210203214736751.png)
		
        wt：标签t对应的行为定向模型需要优化的参数
		        n：不同的行为类型，比如搜索、浏览、购买等
        x(b)：原始行为b经过特征选择函数后，作为特征输入(看下文)
		        含义解读：不同行为的加权和作为参数λt
	
- 特征生成
		
  - x(b)函数如何选择？
		
    - 最常用函数：将一段时间内的原始用户行为映射到确定的标签体系上，同时计算出各行为在对应标签上的累积强度作为模型的特征输入
		    - 累计控制在一段时间内方法

		    	- 1.滑动窗法
		
    	  - 设定时间窗D，把D内的全部行为强度累加求和
		
    	    ![](https://cdn.jsdelivr.net/gh/notlate-cn/imgs/blogs/image-20210203214821267.png)

		    	- 2.时间衰减法
    	
		    		- 设定衰减因子α，用上一个时间片的累计特征与本时间片的行为强度递归得到本时间片的累计特征
		    		
    		  ![](https://cdn.jsdelivr.net/gh/notlate-cn/imgs/blogs/image-20210203214832090.png)
		    		
    		- 优点：只需要保存前一时间片的累计特征和当前时间片的行为强度，时间和空间复杂度都很低
		
  - x(b)函数计算方法：
		  即把不同行为映射到一个或者多个定向标签上

		  	- 1.网页浏览、分享等与内容相关的行为
		  	
  	  	- 用有监督文本主题模型方法，映射到预先定义好的标签体系上
		  		- 提取内容中的关键字
  	
		  	- 2.广告点击等与广告活动相关行为
  	
		  		- 转化为对落地页内容的分析，然后类似于1

  	- 3.搜索、搜索点击等与查询相关行为
		
		   	- 利用搜索引擎做内容扩展
  	
		   - 对查询进行某垂直领域分类时，直接利用相应垂直媒体的标签体系和搜索引擎
  	
		- 4.转化等需求行为
		
  		- 对应到一个单品，利用单品分类信息，可以将其映射到某个标签上。
		
    - w的计算方法：
		即模型训练集的组织和生成方式
		
		  	- 训练集长度：为了消除工作日的周期性影响，训练集的天数一般选择7的倍数
		  	- 时间片大小：反映了对定向的时效性的要求，若想更快的利用行为数据对标签做出调整，则缩小时间片
		
		- 决策过程
		
			- 不需要λ到h的泊松分布，只需要计算线性函数λ的值，然后根据预先确定的阈值来确定某个用户是否应该被打上某个定向标签
			- 计算过程比训练过程的数据准备要简单，只需要根据时间衰减法和特征映射函数计算出λ(d)即可。
		
		- reach/CRT曲线进行半定量评测
		
			- reach：标签接触到的人群规模
			- 曲线含义：标签覆盖的人群规模越小，则应该越准确，也即对该类型的广告的CRT较高；随着人群规模覆盖的扩大，CRT逐渐走低
			- 生成此曲线只需要遍历一遍数据

### 上下文标签t(c)

- 特点：以当前环境信息为依据
- 分类：

	- 
地域定向
	- 频道定向
	- 上下文定向

		- 方法

			- 根据广告请求中的参数信息，经过简单运算就可以得到。比如：地域定向、频道/URL定向、操作系统定向等
			- 基于上下文页面的一些特征标签进行定向，比如：关键词、主题、分类等。如何获取页面信息呢？

				- 半在线抓取系统

					- 工作原理

						- 1.在线广告请求到来
						- 2.如果该请求的上下文URL在缓存中，则直接返回对应的标签
						- 3.如果URL在缓存中不存在，为了广告请求能够及时响应，则先返回空标签集合(做随机或默认推荐)；同时立刻向后台抓取队列加入此URL，然后打标签入缓存
						- 4.考虑到页面内容可能会不定期更新，则可以设置合适的TTL自动失效缓存

					- 优点

						- 1.在线缓存处理效率极高，仅仅抓取有广告请求的URL，节省爬虫资源
						- 2.只抓取需要的页面，且第一次广告请求后很快得到页面标签，使得页面的信息覆盖率较高

		- 主要思路

			- 思路1：用规则将页面进行归类(为频道或主题分类)
			- 思路2：提取页面中的关键词
			- 思路3：提取页面入链锚文本中的关键词，技术较难
			- 思路4：提取页面流量来源中的搜索关键词，更接近行为定向
			- 思路5：主题模型将页面内容映射到语义空间中的一组主题上，泛化广告主需求，提高市场流动性和竞价水平

				- 类别

					- 1.监督学习方法：预先定义好主题集合，用监督学习方法将文档映射到某一个元素上
					- 2.无监督学习方法：不预先定义主题集合，控制主题的总个数，用无监督学习方法自动学习出主题集合以及文档到这些主题的映射函数

				- 用途

					- 广告效果优化的特征提取：两者都可以
					- 对广告主售卖的标签体系：优先考虑监督学习方法

				- 方法

					- 潜在语义分析LSA模型：对文档和词组成的矩阵X进行奇异值分解(SVD)，找到这一矩阵的主要模式。
					- 概率潜在语义索引PLSA方法：通过对文档生成过程进行概率建模来进行主题分析
					- 文档主题模型LDA方法：在文档信息不足或噪声较大时，利用贝叶斯框架对结果做有效的平滑
					- 词嵌入word2vec方法：不能够针对具体问题学习语义表示

		- 基础技术：关键词提取

			- 方法1：按照信息检索中的一般方法，选取页面内容中TF-IDF较高的词作为关键词
			- 方法2：需求方驱动，从广告商相关描述中得到商业价值高的关键词表和IDF，再与页面内容中关键词的TF一起计算TF-IDF。

### 广告主定制化标签t(a,u)

- 特点：完全开放的标签体系，与广告主数目成正比，适合于程序化交易中由需求方提供，以便与上下文或用户标签进行匹配
- 分类

	- 重定向
	- 新客推荐

